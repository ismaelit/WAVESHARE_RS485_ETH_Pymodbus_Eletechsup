{
  "gateway_config": {
    "device_name": "Waveshare RS485-TO-ETH-B",
    "description": "Configuração consolidada para sistema multimodulo 25IOB16",
    "version": "1.0",
    "created": "2024-12-19",
    "author": "Sistema Multimodulo"
  },
  
  "mqtt_settings": {
    "server_ip": "172.9.2.11",
    "server_port": 1883,
    "username": "choppers",
    "password": "ismaisma",
    "keep_alive": 60,
    "protocol_version": "3.1.1"
  },
  
  "modulos": {
    "modulo_1": {
      "description": "Módulo 1 - 16 portas com entradas e saídas",
      "mqtt_client_id": "modulo1_gateway",
      "publish_topic": "modbus/modulo1/status",
      "subscribe_topic": "modbus/modulo1/control",
      "server_upload_time": 100,
      "modbus_rtu": {
        "slave_address": 1,
        "function_code": 3,
        "polling_interval": 100
      },
      "json_structure": {
        "device_id": "modulo1_25iob16",
        "timestamp": "auto_ntp",
        "data_nodes": [
          {
            "id": "1",
            "json_key": "entradas_digitais",
            "data_source": "modbus_rtu",
            "modbus_register": 192,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status das 16 entradas digitais (registrador 192)"
          },
          {
            "id": "2",
            "json_key": "saida_1",
            "data_source": "modbus_rtu",
            "modbus_register": 0,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 1"
          },
          {
            "id": "3",
            "json_key": "saida_2",
            "data_source": "modbus_rtu",
            "modbus_register": 1,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 2"
          },
          {
            "id": "4",
            "json_key": "saida_3",
            "data_source": "modbus_rtu",
            "modbus_register": 2,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 3"
          },
          {
            "id": "5",
            "json_key": "saida_4",
            "data_source": "modbus_rtu",
            "modbus_register": 3,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 4"
          },
          {
            "id": "6",
            "json_key": "saida_5",
            "data_source": "modbus_rtu",
            "modbus_register": 4,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 5"
          },
          {
            "id": "7",
            "json_key": "saida_6",
            "data_source": "modbus_rtu",
            "modbus_register": 5,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 6"
          },
          {
            "id": "8",
            "json_key": "saida_7",
            "data_source": "modbus_rtu",
            "modbus_register": 6,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 7"
          },
          {
            "id": "9",
            "json_key": "saida_8",
            "data_source": "modbus_rtu",
            "modbus_register": 7,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 8"
          },
          {
            "id": "10",
            "json_key": "saida_9",
            "data_source": "modbus_rtu",
            "modbus_register": 8,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 9"
          },
          {
            "id": "11",
            "json_key": "saida_10",
            "data_source": "modbus_rtu",
            "modbus_register": 9,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 10"
          },
          {
            "id": "12",
            "json_key": "saida_11",
            "data_source": "modbus_rtu",
            "modbus_register": 10,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 11"
          },
          {
            "id": "13",
            "json_key": "saida_12",
            "data_source": "modbus_rtu",
            "modbus_register": 11,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 12"
          },
          {
            "id": "14",
            "json_key": "saida_13",
            "data_source": "modbus_rtu",
            "modbus_register": 12,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 13"
          },
          {
            "id": "15",
            "json_key": "saida_14",
            "data_source": "modbus_rtu",
            "modbus_register": 13,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 14"
          },
          {
            "id": "16",
            "json_key": "saida_15",
            "data_source": "modbus_rtu",
            "modbus_register": 14,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 15"
          },
          {
            "id": "17",
            "json_key": "saida_16",
            "data_source": "modbus_rtu",
            "modbus_register": 15,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 16"
          }
        ]
      }
    },
    
    "modulo_2": {
      "description": "Módulo 2 - 4 portas apenas saídas",
      "mqtt_client_id": "modulo2_gateway",
      "publish_topic": "modbus/modulo2/status",
      "subscribe_topic": "modbus/modulo2/control",
      "server_upload_time": 500,
      "modbus_rtu": {
        "slave_address": 2,
        "function_code": 3,
        "polling_interval": 500
      },
      "json_structure": {
        "device_id": "modulo2_25iob16",
        "timestamp": "auto_ntp",
        "data_nodes": [
          {
            "id": "1",
            "json_key": "saida_1",
            "data_source": "modbus_rtu",
            "modbus_register": 0,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 1"
          },
          {
            "id": "2",
            "json_key": "saida_2",
            "data_source": "modbus_rtu",
            "modbus_register": 1,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 2"
          },
          {
            "id": "3",
            "json_key": "saida_3",
            "data_source": "modbus_rtu",
            "modbus_register": 2,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 3"
          },
          {
            "id": "4",
            "json_key": "saida_4",
            "data_source": "modbus_rtu",
            "modbus_register": 3,
            "data_length": 2,
            "data_format": "unsigned_int",
            "decimal_places": 0,
            "unit": "",
            "add_quotes": false,
            "description": "Status da saída 4"
          }
        ]
      }
    }
  },
  
  "output_examples": {
    "modulo_1_example": {
      "device_id": "modulo1_25iob16",
      "timestamp": "2024-12-19 15:30:45",
      "entradas_digitais": 12345,
      "saida_1": 256,
      "saida_2": 0,
      "saida_3": 256,
      "saida_4": 0,
      "saida_5": 256,
      "saida_6": 0,
      "saida_7": 256,
      "saida_8": 0,
      "saida_9": 256,
      "saida_10": 0,
      "saida_11": 256,
      "saida_12": 0,
      "saida_13": 256,
      "saida_14": 0,
      "saida_15": 256,
      "saida_16": 0
    },
    "modulo_2_example": {
      "device_id": "modulo2_25iob16",
      "timestamp": "2024-12-19 15:30:45",
      "saida_1": 256,
      "saida_2": 0,
      "saida_3": 256,
      "saida_4": 0
    }
  },
  
  "installation_instructions": {
    "step1": "Conectar o gateway RS485-TO-ETH-B ao seu servidor MQTT",
    "step2": "Configurar as configurações MQTT no gateway",
    "step3": "Configurar as configurações JSON para cada módulo",
    "step4": "Conectar os módulos 25IOB16 via RS485 ao gateway",
    "step5": "Testar a comunicação via tópicos MQTT",
    "step6": "Monitorar os dados JSON publicados automaticamente"
  }
}
